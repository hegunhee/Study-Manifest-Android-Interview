## ❓ Q) 27. 안드로이드 파일 시스템이란 무엇인가요?

---

안드로이드 파일 시스템은 **앱과 사용자 데이터를 안전하고 효율적으로 저장, 검색, 관리**할 수 있도록 설계된 구조화된 저장 환경이며, **리눅스 파일 시스템 아키텍처** 위에 구축되어 **보안과 권한 모델**을 철저히 따릅니다:contentReference[oaicite:0]{index=0}.

---

### 📂 주요 구성 요소

| 디렉토리 / 파티션 | 설명 |
|------------------|------|
| `/system`        | 시스템 앱, 프레임워크 라이브러리 등 운영체제 핵심 파일 포함. 읽기 전용으로 설정됨. |
| `/data`          | 앱별 데이터, DB, SharedPreferences 저장. `/data/data/패키지명` 구조로 앱 전용. |
| `/cache`         | 시스템이나 앱이 재시작될 때 필요 없는 캐시 파일 저장. |
| `/sdcard` 또는 `/storage` | 외부 저장소로 이미지, 비디오 등 미디어 파일 저장용. 여러 앱에서 공유 가능. 내부 저장소 또는 SD카드일 수 있음. |
| `/tmp`           | 앱 실행 중 생성된 임시 파일 저장. 시스템 재시작 시 삭제됨. |

---

### 🗃️ 저장 위치 선택 기준

| 저장소 | 접근 권한 | 사용 목적 |
|--------|------------|-----------|
| **Internal Storage** | 앱만 접근 가능 | 민감한 데이터, 설정, 비공개 파일 |
| **External Storage** | 여러 앱 공유 가능 | 사진, 동영상, 다운로드 파일 등 사용자 생성 콘텐츠 |
| **Temporary Files** | 일시적 사용 | 임시 캐시, 비정규 데이터 |

---

### 🔐 보안과 권한 관리

- 내부 저장소는 기본적으로 **앱 외 접근 불가(샌드박스 구조)**.
- 외부 저장소 접근 시 Android 10(Q) 이상부터는 **Scoped Storage**를 적용.
- 외부 저장소에 접근하려면 `MediaStore`, `ContentResolver`, 또는 **SAF(Storage Access Framework)** 사용을 권장.

---

### 📑 SAF (Storage Access Framework)

**SAF**는 사용자가 명시적으로 선택한 파일에만 접근할 수 있도록 하여 **앱 간 파일 공유와 사용자 권한 관리를 통합**하는 API 집합입니다.

#### 🔹 SAF 주요 구성 요소

| 구성 요소 | 설명 |
|-----------|------|
| `Intent.ACTION_OPEN_DOCUMENT` | 사용자가 파일을 열 수 있도록 파일 선택기 호출 |
| `Intent.ACTION_CREATE_DOCUMENT` | 사용자가 새 파일을 생성하도록 호출 |
| `DocumentFile` | SAF로 접근한 파일을 다루기 위한 유틸리티 클래스 |
| `ContentResolver` | 선택된 문서의 InputStream/OutputStream 접근 제공 |

#### 🔹 SAF 도입 이유

- Android 10 이상에서 외부 저장소 접근 제한(Scoped Storage)에 대응
- 사용자 프라이버시 강화
- 명시적 파일 선택 방식으로 오용 방지

---

### 🧩 실전 질문  
**Q) 안드로이드는 파일 시스템에서 보안 및 권한을 어떻게 관리하며, 앱이 서로의 비공개 데이터에 접근할 수 없도록 보장하는 메커니즘은 무엇인가요?**

✅ **답변:**  
안드로이드는 **앱 샌드박싱(App Sandbox)** 구조를 통해 보안을 보장합니다. 각 앱은 독립된 UID(User ID)로 실행되며, 해당 앱의 내부 저장소(`/data/data/패키지명`)는 **해당 UID를 가진 프로세스만 접근**할 수 있습니다. 이로 인해 기본적으로 다른 앱은 해당 앱의 비공개 데이터에 접근할 수 없습니다.

또한 다음과 같은 보안 메커니즘을 통해 권한을 강화합니다:

- **파일 수준 접근 제어**: 내부 저장소는 앱만 접근 가능하며, 다른 앱은 시스템적으로 차단됩니다.
- **권한 요청 시스템(Permission Model)**: 외부 저장소, 카메라, 마이크 등 민감한 리소스는 `AndroidManifest.xml`에 명시적으로 선언하고, 사용자 승인 후에만 접근 가능.
- **Scoped Storage(범위 저장소)**: Android 10 이상에서 외부 저장소 접근을 제한하고, 앱별 격리된 디렉토리를 제공.
- **SAF(Storage Access Framework)**: 사용자가 선택한 파일에만 접근하도록 설계되어 앱 간 명시적인 공유를 유도.

이러한 보안 체계 덕분에, 앱은 사용자 데이터를 안전하게 보호할 수 있으며, 악성 앱의 무단 접근을 효과적으로 차단할 수 있습니다.

---

### ✅ 요약

안드로이드 파일 시스템은 **보안과 권한이 통제된 디렉토리 기반 구조**를 통해, 시스템 파일·앱 데이터·공유 콘텐츠 등을 적절히 분리하여 저장합니다. Android 10 이상에서는 **Scoped Storage** 및 **SAF**를 통해 외부 저장소 접근 시 사용자 주도적 접근 방식을 요구하며, 이는 보안과 사용자 통제를 강화합니다. 또한 **샌드박스와 UID 기반의 접근 제어 메커니즘**으로 앱 간 데이터 침해를 원천적으로 방지합니다
