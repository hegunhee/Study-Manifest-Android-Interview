## ❓ Q30. R8 최적화란 무엇인가요?

---

### 📌 개요

**R8**은 안드로이드 앱의 **코드 축소(Shrinking)**, **최적화(Optimization)**, **난독화(Obfuscation)**, **리소스 제거(Resource shrinking)** 기능을 하나로 통합한 **빌드 도구**로, 기존의 ProGuard를 대체하는 Android 공식 툴입니다. 주로 **릴리스 빌드(release build)** 시점에 작동하며, 앱의 **용량을 줄이고 실행 성능을 향상**시키는 데 큰 역할을 합니다:contentReference[oaicite:0]{index=0}.

---

### 🧠 작동 원리

릴리스 빌드 시, R8은 다음과 같은 방식으로 앱을 최적화합니다:

- **죽은 코드 제거 (Dead Code Removal)**: 호출되지 않는 메서드, 클래스 제거
- **인라이닝 (Inlining)**: 짧은 메서드를 호출부에 직접 삽입해 오버헤드 제거
- **상수 폴딩 (Constant Folding)**: 컴파일 타임에 상수를 계산하여 런타임 성능 향상
- **클래스 병합 (Class Merging)**: 유사 클래스들을 하나로 통합하여 메모리 절약
- **인터페이스 호출 → 정적 호출**: 실행 속도를 높이기 위해 정적 메서드 호출로 전환
- **난독화 (Obfuscation)**: 리버스 엔지니어링 방지를 위해 클래스/메서드 이름 축약
- **리소스 제거**: 사용되지 않는 레이아웃, 드로어블, 문자열 등 제거

---

### 🚀 성능 효과

Jetpack Compose 기반 앱에서 R8 최적화만 활성화해도:

- **앱 시작 시간 약 75% 향상**
- **프레임 렌더링 성능 약 60% 향상**  
→ 이는 Compose의 동적 특성과 JIT 컴파일로 인한 디버그 모드 오버헤드를 해소해줍니다:contentReference[oaicite:1]{index=1}.

---

### ⚠️ 주의할 점 (한계)

- **과도한 축소**: 리플렉션 또는 동적 로딩된 클래스가 잘못 제거되면 런타임 오류 발생
- **구성 복잡성**: ProGuard 규칙 작성이 복잡하며 잘못 구성 시 정상 작동 방해 가능
- **디버깅 어려움**: 난독화된 스택트레이스로 인해 문제 추적이 어려움

---

### ✅ 실전 질문

> Q) R8 최적화는 앱 성능을 어떻게 개선하고, APK/AAB 용량을 어떻게 줄이나요?

- R8은 사용하지 않는 코드와 리소스를 제거하고, 불필요한 메서드 호출을 줄여 성능을 향상시킵니다. 특히 람다 그룹화, 상수 폴딩, 정적 호출 전환 등을 통해 앱 시작 시간과 렌더링 속도를 개선합니다. 동시에, 난독화와 리소스 제거로 APK/AAB 크기를 획기적으로 줄일 수 있습니다.

> Q) R8은 ProGuard와 어떻게 다르며, 어떤 추가적인 장점을 제공하나요?

- ProGuard 대비 **R8은 빌드 시스템과의 통합성**이 높고, **단일 패스 처리로 속도가 빠르며**, **더 많은 최적화 전략을 기본 제공**합니다. ProGuard 규칙은 그대로 사용 가능하면서도 향상된 효율성과 보안을 제공합니다.

---
